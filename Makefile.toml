
[config]
additional_profiles = [
    "ci-coverage-tasks",
    "ci-all-build-tasks",
    "ci-static-code-analysis-tasks",
    "publish-pre-cleanup"
]

[tasks.outdated]
force = true

[tasks.start-redis]
script = [
  "echo \"Starting Redis\"",
  "redis-server --loglevel warning &",
  "sleep 1"
]

[tasks.stop-redis]
script = [
  "echo \"Stopping any running Redis\"",
  "ps -ef | grep [r]edis-server | awk '{print $2}' | xargs kill -9 || true",
]

[tasks.init]
condition = { env_false = [ 'CARGO_MAKE_CI' ] }
dependencies = [
  "stop-redis",
  "start-redis"
]

[tasks.end]
condition = { env_false = [ 'CARGO_MAKE_CI' ] }
alias = "stop-redis"
